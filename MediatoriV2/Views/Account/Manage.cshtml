@model mediatori.Models.UserProfile

@{
    ViewBag.Title = "Manage";

    if (TempData["AREA"] == "Mobile" || (HttpContext.Current.Request.RequestContext.RouteData.DataTokens["area"] != null && HttpContext.Current.Request.RequestContext.RouteData.DataTokens["area"].ToString() == "Mobile"))
    {
        Layout = "~/Areas/Mobile/Views/Shared/MasterPageMobile.cshtml";
    }
    else
    {
        Layout = "~/Views/Shared/_LayoutMobile.cshtml";
    }

}





@if (User.Identity is MyUsers.MyCustomIdentity || User.Identity is System.Web.Security.FormsIdentity)
{
    <a style="float:right; margin-top:20px;" href="@Url.Action("LogOff", "Account")" class="ui-btn-inline ui-btn ui-corner-all ui-mini">Logoff</a>
}

<a style="float:right; margin-top:20px;" href="@Url.Action("Refresh", "Account")" class="ui-btn-inline ui-btn ui-corner-all ui-mini">Refresh Data</a>
<h2>My Account</h2>
<div class="ui-grid-a">
    <div class="ui-block-a">
        <div class="ui-bar ui-bar-a">Login:</div>
        <div class="ui-bar ui-bar-a">Profilo:</div>
    </div>

    <div class="ui-block-b">
        <div class="ui-bar ui-body-a">@User.Identity.Name</div>
        <div class="ui-bar ui-body-a">@MyHelper.decodeNull((Session["MySessionData"] as MyManagerCSharp.MySessionData).Profili.Replace(";", " - "))</div>
    </div>
</div>


<h2>Gruppi</h2>

@if ((Session["MySessionData"] as MyManagerCSharp.MySessionData).Groups == null || (Session["MySessionData"] as MyManagerCSharp.MySessionData).Groups.Count == 0)
{
    <h3>Nessun gruppo di lavorazione configurato</h3>
}
else
{
    <ol data-role="listview" data-inset="true">
        @foreach (MyManagerCSharp.Models.MyGroupSmall g in (Session["MySessionData"] as MyManagerCSharp.MySessionData).Groups)
        {
            <li data-icon="false"><a href="#">@g.nome</a></li>
        }

    </ol>
}


