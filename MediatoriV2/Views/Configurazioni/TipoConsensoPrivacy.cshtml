@model mediatori.Models.Configurazione.TipoConsensoPrivacyModel 
@{
    ViewBag.Title = "TipoConsensoPrivacy";
    Layout = "~/Views/Shared/_LayoutMobile.cshtml";
    int conta = 0;
    string css;
}

<script type="text/javascript">
    function newItem() {
        // alert("newItem");

        $("#popupNuovoConsenso").text("Nuovo");
        $("#edit_item_id").val(0);
        $("#edit_item_descrizione").val('');
        $("#popupNuovo").popup("open");
    }
</script>

<h2>TipoConsensoPrivacy</h2>
<a href="javascript:newItem();" data-rel="popup" data-position-to="window" class="ui-btn ui-corner-all ui-shadow ui-mini ui-btn-inline ui-icon-plus ui-btn-icon-left">Nuovo</a>
@if (Model.listaTipiConsenso != null)
{
    
    <fieldset>
        <legend>Lista Tipi consenso configurati</legend>
        
        <table class="MyTable">
            <tr class="ui-bar-b">
                <th>Descrizione</th>
                <th>Attivo</th>
                <th></th>
                <th></th>
            </tr>
            
            @foreach (mediatori.Models.Anagrafiche.TipoConsensoPrivacy privacy in Model.listaTipiConsenso)
            {
                conta++;
                if (conta % 2 == 0)
                {
                    css = MyConstants.TABLE_ROW_STYLE;
                }
                else
                {
                    css = MyConstants.TABLE_ALTERNATING_ROW_STYLE;
                }

                <tr class="@css">
                    <td>@privacy.descrizione</td>
                    <td>@MyHelper.decodeAttivaImage(Request.ApplicationPath,privacy.attivo)</td>
                    @if (!privacy.eliminabile)
                    {
                        <td>
                            &nbsp;
                        </td>
                    }
                    else
                    {
                        <td>
                            <a class="ui-btn-inline ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all" title="Cancella" href="javascript:deleteStato(@privacy.id);">Cancella</a>
                        </td>
                    }
                </tr>
            }
        </table>
    </fieldset>
}
@{Html.RenderPartial("_footer");}

<div data-role="popup" id="popupNuovo" data-overlay-theme="b" data-theme="a" data-dismissible="false" style="min-width:500px">
    <div data-role="header" data-theme="a">
        <h1 id="popupNuovoConsenso">Nuovo</h1>
    </div>
    <div role="main" class="ui-content">
        @using (Html.BeginForm("TipoConsensoPrivacy", "Configurazioni", FormMethod.Post))
        {
            @Html.AntiForgeryToken()

            <input type="hidden" id="edit_item_id" name="id" value="0" />

            <div class="ui-field-contain">
                <label for="descrizione">Descrizione *</label>
                <input type="text" name="descrizione" required id="edit_item_descrizione">
            </div>
            <div class="ui-field-contain">
                @{Html.RenderPartial("_Flipswitch", new mediatori.Models.FlipswitchModel("attivo", true));}
                
            </div>
            <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b ui-mini">Annulla</a>
            <input type="submit" value="Conferma" data-inline="true" data-mini="true" />
        }
    </div>
</div>